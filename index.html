<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>DolbaebSMS</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: { sans: ['Inter', 'sans-serif'] },
            colors: { gray: { 750: '#2d3748', 850: '#1a202c', 950: '#0d1117' } },
            animation: {
              'fade-in': 'fadeIn 0.3s ease-out',
              'slide-up': 'slideUp 0.3s ease-out',
              'pulse-gold': 'pulseGold 2s infinite',
            },
            keyframes: {
              fadeIn: { '0%': { opacity: '0' }, '100%': { opacity: '1' } },
              slideUp: { '0%': { transform: 'translateY(10px)', opacity: '0' }, '100%': { transform: 'translateY(0)', opacity: '1' } },
              pulseGold: { '0%, 100%': { transform: 'scale(1)', opacity: '1' }, '50%': { transform: 'scale(1.05)', opacity: '0.8' } }
            }
          }
        }
      }
    </script>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
      * { box-sizing: border-box; }
      body { background-color: #0f172a; color: #e2e8f0; overscroll-behavior-y: none; height: 100vh; overflow: hidden; }
      #root { height: 100vh; overflow: hidden; }
      .safe-area-bottom { padding-bottom: max(1rem, env(safe-area-inset-bottom)); }
      .safe-area-top { padding-top: max(0.5rem, env(safe-area-inset-top)); }
      .frame-basic { border: 2px solid #6b7280; box-shadow: 0 0 5px rgba(107, 114, 128, 0.5); }
      .frame-silver { border: 3px solid #c0c0c0; box-shadow: 0 0 10px rgba(192, 192, 192, 0.7); }
      .frame-gold { border: 3px solid #ffd700; box-shadow: 0 0 15px rgba(255, 215, 0, 0.8); }
      .frame-diamond { border: 3px solid #b9f2ff; box-shadow: 0 0 20px rgba(185, 242, 255, 0.9); }
      .frame-rainbow { 
        border: 3px solid transparent;
        background: linear-gradient(45deg, #ff0000, #ff9900, #ffff00, #00ff00, #00ffff, #0000ff, #9900ff) border-box;
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.5);
      }
      .avatar-locked { filter: grayscale(1) brightness(0.5); position: relative; }
      .avatar-locked::after { content: "üîí"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-size: 20px; z-index: 10; }
      .nft-container { position: relative; display: inline-block; }
      .nft-orbital { position: absolute; width: 80px; height: 80px; top: 50%; left: 50%; margin-top: -40px; margin-left: -40px; }
      .nft-item { position: absolute; font-size: 20px; width: 30px; height: 30px; display: flex; align-items: center; justify-content: center; }
      @keyframes orbit1 { 0% { transform: rotate(0deg) translateX(35px) rotate(0deg); } 100% { transform: rotate(360deg) translateX(35px) rotate(-360deg); } }
      @keyframes orbit2 { 0% { transform: rotate(120deg) translateX(35px) rotate(-120deg); } 100% { transform: rotate(480deg) translateX(35px) rotate(-480deg); } }
      @keyframes orbit3 { 0% { transform: rotate(240deg) translateX(35px) rotate(-240deg); } 100% { transform: rotate(600deg) translateX(35px) rotate(-600deg); } }
      @media (max-width: 640px) {
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        button, [role="button"] { min-height: 44px; min-width: 44px; }
      }
    </style>

    <script type="importmap">
{"imports": {
  "react": "https://esm.sh/react@18.2.0",
  "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
  "lucide-react": "https://esm.sh/lucide-react@0.263.1?deps=react@18.2.0",
  "date-fns": "https://esm.sh/date-fns@2.30.0",
  "firebase/app": "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js",
  "firebase/database": "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js"
}}</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useEffect, useRef } from 'react';
        import { createRoot } from 'react-dom/client';
        import { Search, Send, Image as ImageIcon, Mic, X, ChevronLeft, Video, Settings as SettingsIcon, Trash2, Smile, MoreVertical, LogOut, User as UserIcon, Loader2, Coins, Crown, Palette, Edit3, Trophy, Bot, TrendingUp, Send as SendIcon, Info, Clock, Star, Zap } from 'lucide-react';
        import { format } from 'date-fns';
        import { initializeApp } from 'firebase/app';
        import { getDatabase, ref, onValue, set, update, push, off, query, orderByChild, startAt, endAt, remove, get } from 'firebase/database';

        // Firebase config
        const app = initializeApp({
            apiKey: "AIzaSyA35T6z2FYS6m9IEJ9x7evxCphgpLhgMX4",
            authDomain: "dolbaebsms-live.firebaseapp.com",
            databaseURL: "https://dolbaebsms-live-default-rtdb.firebaseio.com",
            projectId: "dolbaebsms-live",
            storageBucket: "dolbaebsms-live.firebasestorage.app",
            messagingSenderId: "912825721862",
            appId: "1:912825721862:web:b92d7f7f553ca4536c0f87"
        });
        const db = getDatabase(app);

        // Components
        const Button = ({ children, variant = 'primary', className = '', isLoading, icon, ...props }) => {
            const baseStyles = "relative flex items-center justify-center gap-2 px-3 py-2.5 rounded-xl font-medium transition-all duration-200 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed text-sm min-h-[44px]";
            const variants = {
                primary: "bg-indigo-600 hover:bg-indigo-500 text-white shadow-lg shadow-indigo-500/20",
                secondary: "bg-slate-700 hover:bg-slate-600 text-slate-100 border border-slate-600",
                danger: "bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/20",
                gold: "bg-yellow-500 hover:bg-yellow-400 text-white shadow-lg shadow-yellow-500/20"
            };
            return (
                <button className={`${baseStyles} ${variants[variant]} ${className}`} disabled={isLoading || props.disabled} {...props}>
                    {isLoading ? <Loader2 className="animate-spin h-4 w-4" /> : <>{icon && <span className="text-base">{icon}</span>}{children}</>}
                </button>
            );
        };

        // Modal Base Component
        const Modal = ({ isOpen, onClose, title, children, className = "" }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-50 flex items-center justify-center p-3 bg-black/60 backdrop-blur-sm animate-fade-in safe-area-top safe-area-bottom">
                    <div className={`w-full max-w-md bg-slate-900 border border-slate-700 rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[95vh] ${className}`}>
                        <div className="p-3 border-b border-slate-800 flex items-center justify-between bg-slate-900 shrink-0">
                            <h2 className="text-lg font-bold text-white">{title}</h2>
                            <button onClick={onClose} className="text-slate-400 hover:text-white p-1"><X size={20} /></button>
                        </div>
                        <div className="p-4 overflow-y-auto custom-scrollbar flex-1">
                            {children}
                        </div>
                    </div>
                </div>
            );
        };

        // Avatar Modal
        const AvatarModal = ({ isOpen, onClose, currentUser, userCoins, onAvatarChange, purchasedAvatars }) => {
            const avatars = [
                { emoji: 'üê∂', price: 50, name: '–°–æ–±–∞–∫–∞' },
                { emoji: 'üê±', price: 75, name: '–ö–æ—à–∫–∞' },
                { emoji: 'üê≠', price: 100, name: '–ú—ã—à—å' },
                { emoji: 'üêπ', price: 125, name: '–•–æ–º—è–∫' },
                { emoji: 'üê∞', price: 150, name: '–ö—Ä–æ–ª–∏–∫' },
                { emoji: 'ü¶ä', price: 175, name: '–õ–∏—Å–∞' },
                { emoji: 'üêª', price: 200, name: '–ú–µ–¥–≤–µ–¥—å' },
                { emoji: 'üêº', price: 225, name: '–ü–∞–Ω–¥–∞' }
            ];

            const handleAvatarSelect = async (avatar) => {
                const isPurchased = purchasedAvatars.includes(avatar.emoji);
                if (!isPurchased && userCoins < avatar.price && currentUser !== 'kayivi') {
                    alert(`–ù—É–∂–Ω–æ ${avatar.price} –∫–æ–∏–Ω–æ–≤ –¥–ª—è —ç—Ç–æ–π –∞–≤–∞—Ç–∞—Ä–∫–∏.`);
                    return;
                }
                try {
                    if (!isPurchased && currentUser !== 'kayivi') {
                        const newPurchasedAvatars = [...purchasedAvatars, avatar.emoji];
                        await update(ref(db, `users/${currentUser}`), { 
                            coins: userCoins - avatar.price,
                            avatar: avatar.emoji,
                            purchasedAvatars: newPurchasedAvatars
                        });
                    } else {
                        await update(ref(db, `users/${currentUser}`), { 
                            avatar: avatar.emoji
                        });
                    }
                    onAvatarChange(avatar.emoji);
                    onClose();
                } catch (error) {
                    console.error('Avatar change error:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ –∞–≤–∞—Ç–∞—Ä–∫–∏');
                }
            };

            return (
                <Modal isOpen={isOpen} onClose={onClose} title="üîÑ –ê–≤–∞—Ç–∞—Ä–∫–∞" className="max-w-2xl">
                    <div className="text-center mb-4">
                        <p className="text-slate-400 text-sm">–í—ã–±–µ—Ä–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä–∫—É</p>
                        <p className="text-xs text-slate-500 mt-1">–ë–∞–ª–∞–Ω—Å: <span className="text-yellow-500">{userCoins.toFixed(3)}</span></p>
                    </div>
                    <div className="grid grid-cols-4 gap-3">
                        {avatars.map((avatar, i) => {
                            const isPurchased = purchasedAvatars.includes(avatar.emoji);
                            const canAfford = userCoins >= avatar.price || currentUser === 'kayivi';
                            const isLocked = !isPurchased && !canAfford && currentUser !== 'kayivi';
                            
                            return (
                                <button
                                    key={i}
                                    onClick={() => !isLocked && handleAvatarSelect(avatar)}
                                    disabled={isLocked}
                                    className={`p-3 rounded-xl flex flex-col items-center gap-2 transition-all ${
                                        isLocked ? 'bg-slate-800 border-2 border-slate-700 avatar-locked' : 'bg-slate-800 hover:bg-slate-700 border-2 border-slate-600 hover:border-yellow-500'
                                    }`}
                                >
                                    <div className="text-3xl">{avatar.emoji}</div>
                                    <div className="text-center">
                                        <h3 className="font-medium text-white text-xs">{avatar.name}</h3>
                                        <p className="text-xs text-slate-400">
                                            {isPurchased ? '‚úì –ö—É–ø–ª–µ–Ω–æ' : currentUser === 'kayivi' ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `${avatar.price} –∫–æ–∏–Ω–æ–≤`}
                                        </p>
                                    </div>
                                </button>
                            );
                        })}
                    </div>
                </Modal>
            );
        };

        // Frame Modal
        const FrameModal = ({ isOpen, onClose, currentUser, userCoins, onFrameChange, userFrame, purchasedFrames }) => {
            const frames = [
                { id: 'none', name: '–ë–µ–∑ —Ä–∞–º–∫–∏', price: 0, className: '' },
                { id: 'basic', name: '–ë–∞–∑–æ–≤–∞—è', price: 50, className: 'frame-basic' },
                { id: 'silver', name: '–°–µ—Ä–µ–±—Ä—è–Ω–∞—è', price: 250, className: 'frame-silver' },
                { id: 'gold', name: '–ó–æ–ª–æ—Ç–∞—è', price: 500, className: 'frame-gold' },
                { id: 'diamond', name: '–ê–ª–º–∞–∑–Ω–∞—è', price: 1250, className: 'frame-diamond' },
                { id: 'rainbow', name: '–†–∞–¥—É–∂–Ω–∞—è', price: 2500, className: 'frame-rainbow' }
            ];

            const handleFrameSelect = async (frame) => {
                const isPurchased = purchasedFrames.includes(frame.id);
                if (!isPurchased && userCoins < frame.price && currentUser !== 'kayivi') {
                    alert(`–ù—É–∂–Ω–æ ${frame.price} –∫–æ–∏–Ω–æ–≤ –¥–ª—è —ç—Ç–æ–π —Ä–∞–º–∫–∏.`);
                    return;
                }
                try {
                    if (!isPurchased && currentUser !== 'kayivi') {
                        const newPurchasedFrames = [...purchasedFrames, frame.id];
                        await update(ref(db, `users/${currentUser}`), { 
                            coins: userCoins - frame.price,
                            frame: frame.id,
                            purchasedFrames: newPurchasedFrames
                        });
                    } else {
                        await update(ref(db, `users/${currentUser}`), { 
                            frame: frame.id
                        });
                    }
                    onFrameChange(frame.id);
                    onClose();
                } catch (error) {
                    console.error('Frame change error:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Ä–∞–º–∫–∏');
                }
            };

            return (
                <Modal isOpen={isOpen} onClose={onClose} title="üñºÔ∏è –†–∞–º–∫–∞" className="max-w-2xl">
                    <div className="text-center mb-4">
                        <p className="text-slate-400 text-sm">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–º–∫—É</p>
                        <p className="text-xs text-slate-500 mt-1">–ë–∞–ª–∞–Ω—Å: <span className="text-yellow-500">{userCoins.toFixed(3)}</span></p>
                    </div>
                    <div className="grid grid-cols-2 gap-3">
                        {frames.map((frame) => {
                            const isPurchased = purchasedFrames.includes(frame.id);
                            const canAfford = userCoins >= frame.price || currentUser === 'kayivi';
                            const isLocked = !isPurchased && !canAfford && currentUser !== 'kayivi' && frame.price > 0;
                            
                            return (
                                <button
                                    key={frame.id}
                                    onClick={() => !isLocked && handleFrameSelect(frame)}
                                    disabled={isLocked}
                                    className={`p-3 rounded-xl flex flex-col items-center gap-2 transition-all ${
                                        isLocked ? 'bg-slate-800 border-2 border-slate-700 avatar-locked' : 
                                        userFrame === frame.id ? 'bg-slate-700 border-2 border-yellow-500' : 'bg-slate-800 hover:bg-slate-700 border-2 border-slate-600 hover:border-yellow-500'
                                    }`}
                                >
                                    <div className={`w-12 h-12 rounded-full bg-gradient-to-tr from-indigo-600 to-purple-600 flex items-center justify-center text-white font-bold text-lg ${frame.className}`}>
                                        {currentUser[0].toUpperCase()}
                                    </div>
                                    <div className="text-center">
                                        <h3 className="font-medium text-white text-sm">{frame.name}</h3>
                                        <p className="text-xs text-slate-400">
                                            {frame.price === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : 
                                             isPurchased ? '‚úì –ö—É–ø–ª–µ–Ω–æ' :
                                             currentUser === 'kayivi' ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `${frame.price} –∫–æ–∏–Ω–æ–≤`}
                                        </p>
                                    </div>
                                </button>
                            );
                        })}
                    </div>
                </Modal>
            );
        };

        // Name Color Modal
        const NameColorModal = ({ isOpen, onClose, currentUser, userCoins, onColorChange, purchasedColors }) => {
            const colors = [
                { id: 'red', name: '–ö—Ä–∞—Å–Ω—ã–π', value: '#ef4444', price: 50 },
                { id: 'orange', name: '–û—Ä–∞–Ω–∂–µ–≤—ã–π', value: '#f97316', price: 50 },
                { id: 'yellow', name: '–ñ–µ–ª—Ç—ã–π', value: '#eab308', price: 50 },
                { id: 'green', name: '–ó–µ–ª–µ–Ω—ã–π', value: '#22c55e', price: 50 },
                { id: 'blue', name: '–°–∏–Ω–∏–π', value: '#3b82f6', price: 50 },
                { id: 'purple', name: '–§–∏–æ–ª–µ—Ç–æ–≤—ã–π', value: '#a855f7', price: 50 },
                { id: 'rainbow', name: '–†–∞–¥—É–∂–Ω—ã–π', value: 'linear-gradient(45deg, #ff0000, #ff9900, #ffff00, #00ff00, #00ffff, #0000ff, #9900ff)', price: 200 }
            ];

            const handleColorSelect = async (color) => {
                const isPurchased = purchasedColors.includes(color.id);
                if (!isPurchased && userCoins < color.price && currentUser !== 'kayivi') {
                    alert(`–ù—É–∂–Ω–æ ${color.price} –∫–æ–∏–Ω–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —Ü–≤–µ—Ç–∞.`);
                    return;
                }
                try {
                    if (!isPurchased && currentUser !== 'kayivi') {
                        const newPurchasedColors = [...purchasedColors, color.id];
                        await update(ref(db, `users/${currentUser}`), { 
                            coins: userCoins - color.price,
                            nameColor: color.id,
                            purchasedColors: newPurchasedColors
                        });
                    } else {
                        await update(ref(db, `users/${currentUser}`), { 
                            nameColor: color.id
                        });
                    }
                    onColorChange(color.id);
                    onClose();
                } catch (error) {
                    console.error('Color change error:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ —Ü–≤–µ—Ç–∞');
                }
            };

            const getNameColorStyle = (colorId) => {
                const colors = {
                    'red': '#ef4444', 'orange': '#f97316', 'yellow': '#eab308', 'green': '#22c55e', 
                    'blue': '#3b82f6', 'purple': '#a855f7', 'rainbow': 'linear-gradient(45deg, #ff0000, #ff9900, #ffff00, #00ff00, #00ffff, #0000ff, #9900ff)'
                };
                return { 
                    color: colors[colorId] || '#ffffff',
                    background: colorId === 'rainbow' ? colors[colorId] : 'transparent',
                    WebkitBackgroundClip: colorId === 'rainbow' ? 'text' : 'initial',
                    WebkitTextFillColor: colorId === 'rainbow' ? 'transparent' : 'initial'
                };
            };

            return (
                <Modal isOpen={isOpen} onClose={onClose} title="üé® –¶–≤–µ—Ç –∏–º–µ–Ω–∏" className="max-w-2xl">
                    <div className="text-center mb-4">
                        <p className="text-slate-400 text-sm">–í—ã–±–µ—Ä–∏—Ç–µ —Ü–≤–µ—Ç –∏–º–µ–Ω–∏</p>
                        <p className="text-xs text-slate-500 mt-1">–ë–∞–ª–∞–Ω—Å: <span className="text-yellow-500">{userCoins.toFixed(3)}</span></p>
                    </div>
                    <div className="grid grid-cols-2 gap-3">
                        {colors.map((color) => {
                            const isPurchased = purchasedColors.includes(color.id);
                            const canAfford = userCoins >= color.price || currentUser === 'kayivi';
                            const isLocked = !isPurchased && !canAfford && currentUser !== 'kayivi';
                            
                            return (
                                <button
                                    key={color.id}
                                    onClick={() => !isLocked && handleColorSelect(color)}
                                    disabled={isLocked}
                                    className={`p-3 rounded-xl flex flex-col items-center gap-2 transition-all ${
                                        isLocked ? 'bg-slate-800 border-2 border-slate-700 avatar-locked' : 'bg-slate-800 hover:bg-slate-700 border-2 border-slate-600 hover:border-yellow-500'
                                    }`}
                                >
                                    <div className="text-xl font-bold" style={getNameColorStyle(color.id)}>–ò–º—è</div>
                                    <div className="text-center">
                                        <h3 className="font-medium text-white text-sm">{color.name}</h3>
                                        <p className="text-xs text-slate-400">
                                            {color.price === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : 
                                             isPurchased ? '‚úì –ö—É–ø–ª–µ–Ω–æ' :
                                             currentUser === 'kayivi' ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `${color.price} –∫–æ–∏–Ω–æ–≤`}
                                        </p>
                                    </div>
                                </button>
                            );
                        })}
                    </div>
                </Modal>
            );
        };

        // Status Modal
        const StatusModal = ({ isOpen, onClose, currentUser, userCoins, onStatusChange, purchasedStatuses }) => {
            const statuses = [
                { id: 'online', text: '–í —Å–µ—Ç–∏', emoji: 'üü¢', price: 0 },
                { id: 'away', text: '–û—Ç–æ—à–µ–ª', emoji: 'üü°', price: 0 },
                { id: 'dnd', text: '–ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å', emoji: 'üî¥', price: 0 },
                { id: 'working', text: '–†–∞–±–æ—Ç–∞—é', emoji: 'üíº', price: 50 },
                { id: 'sleeping', text: '–°–ø–ª—é', emoji: 'üò¥', price: 50 },
                { id: 'gaming', text: '–ò–≥—Ä–∞—é', emoji: 'üéÆ', price: 50 }
            ];

            const handleStatusSelect = async (status) => {
                const isPurchased = purchasedStatuses.includes(status.id) || status.price === 0;
                if (!isPurchased && userCoins < status.price && currentUser !== 'kayivi') {
                    alert(`–ù—É–∂–Ω–æ ${status.price} –∫–æ–∏–Ω–æ–≤ –¥–ª—è —ç—Ç–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞.`);
                    return;
                }
                try {
                    if (!isPurchased && currentUser !== 'kayivi') {
                        const newPurchasedStatuses = [...purchasedStatuses, status.id];
                        await update(ref(db, `users/${currentUser}`), { 
                            coins: userCoins - status.price,
                            status: status.text,
                            statusEmoji: status.emoji,
                            purchasedStatuses: newPurchasedStatuses
                        });
                    } else {
                        await update(ref(db, `users/${currentUser}`), { 
                            status: status.text,
                            statusEmoji: status.emoji
                        });
                    }
                    onStatusChange(status.text, status.emoji);
                    onClose();
                } catch (error) {
                    console.error('Status change error:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ —Å—Ç–∞—Ç—É—Å–∞');
                }
            };

            return (
                <Modal isOpen={isOpen} onClose={onClose} title="üí¨ –°—Ç–∞—Ç—É—Å">
                    <div className="text-center mb-4">
                        <p className="text-slate-400 text-sm">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å</p>
                        <p className="text-xs text-slate-500 mt-1">–ë–∞–ª–∞–Ω—Å: <span className="text-yellow-500">{userCoins.toFixed(3)}</span></p>
                    </div>
                    <div className="grid grid-cols-1 gap-2">
                        {statuses.map((status) => {
                            const isPurchased = purchasedStatuses.includes(status.id) || status.price === 0;
                            const canAfford = userCoins >= status.price || currentUser === 'kayivi';
                            const isLocked = !isPurchased && !canAfford && currentUser !== 'kayivi';
                            
                            return (
                                <button
                                    key={status.id}
                                    onClick={() => !isLocked && handleStatusSelect(status)}
                                    disabled={isLocked}
                                    className={`p-2 rounded-xl flex items-center gap-2 text-left min-h-[44px] ${
                                        isLocked ? 'bg-slate-800 border border-slate-700 avatar-locked' : 'bg-slate-800 hover:bg-slate-700 border border-slate-600'
                                    }`}
                                >
                                    <span className="text-xl">{status.emoji}</span>
                                    <div className="flex-1">
                                        <div className="text-white text-sm">{status.text}</div>
                                    </div>
                                    <div className="text-xs text-slate-400">
                                        {status.price === 0 ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : 
                                         isPurchased ? '‚úì' :
                                         currentUser === 'kayivi' ? '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ' : `${status.price} –∫–æ–∏–Ω–æ–≤`}
                                    </div>
                                </button>
                            );
                        })}
                    </div>
                </Modal>
            );
        };

        // NFT Market Modal —Å –±–∏—Ä–∂–µ–π
        const NFTMarketModal = ({ isOpen, onClose, currentUser, userCoins, onCoinsUpdate, userNFTs, onNFTUpdate }) => {
            const [activeTab, setActiveTab] = useState('market');
            const [isLoading, setIsLoading] = useState(false);
            const [giftRecipient, setGiftRecipient] = useState('');
            const [giftNFT, setGiftNFT] = useState(null);
            const [nftPrices, setNftPrices] = useState({});
            const [topUsers, setTopUsers] = useState([]);

            const nfts = [
                // Common
                { id: 'ghost', name: '–ü—Ä–∏–∑—Ä–∞–∫', emoji: 'üëª', basePrice: 600, rarity: 'common', pattern: 'basic', durability: 100 },
                { id: 'robot', name: '–†–æ–±–æ—Ç', emoji: 'ü§ñ', basePrice: 800, rarity: 'common', pattern: 'mechanical', durability: 100 },
                { id: 'panda', name: '–ü–∞–Ω–¥–∞', emoji: 'üêº', basePrice: 900, rarity: 'common', pattern: 'cute', durability: 100 },
                { id: 'fox', name: '–õ–∏—Å–∞', emoji: 'ü¶ä', basePrice: 1100, rarity: 'common', pattern: 'wild', durability: 100 },
                
                // Rare
                { id: 'alien', name: '–ü—Ä–∏—à–µ–ª–µ—Ü', emoji: 'üëΩ', basePrice: 1200, rarity: 'rare', pattern: 'cosmic', durability: 150 },
                { id: 'tiger', name: '–¢–∏–≥—Ä', emoji: 'üêØ', basePrice: 1300, rarity: 'rare', pattern: 'stripes', durability: 150 },
                { id: 'lion', name: '–õ–µ–≤', emoji: 'ü¶Å', basePrice: 1400, rarity: 'rare', pattern: 'royal', durability: 150 },
                
                // Epic
                { id: 'dragon', name: '–î—Ä–∞–∫–æ–Ω', emoji: 'üêâ', basePrice: 1800, rarity: 'epic', pattern: 'fire', durability: 200 },
                { id: 'phoenix', name: '–§–µ–Ω–∏–∫—Å', emoji: 'ü¶ö', basePrice: 2200, rarity: 'epic', pattern: 'rebirth', durability: 200 },
                { id: 'unicorn', name: '–ï–¥–∏–Ω–æ—Ä–æ–≥', emoji: 'ü¶Ñ', basePrice: 3000, rarity: 'epic', pattern: 'magic', durability: 200 },
                
                // Legendary
                { id: 'spaceship', name: '–ö–æ—Ä–∞–±–ª—å', emoji: 'üöÄ', basePrice: 3500, rarity: 'legendary', pattern: 'futuristic', durability: 300 },
                { id: 'comet', name: '–ö–æ–º–µ—Ç–∞', emoji: '‚òÑÔ∏è', basePrice: 4000, rarity: 'legendary', pattern: 'cosmic', durability: 300 },
                { id: 'rainbow_dragon', name: '–†–∞–¥—É–∂–Ω—ã–π –î—Ä–∞–∫–æ–Ω', emoji: 'üåàüêâ', basePrice: 8000, rarity: 'legendary', pattern: 'rainbow', durability: 300 }
            ];

            // –ó–∞–≥—Ä—É–∑–∫–∞ —Ü–µ–Ω –∏ —Ç–æ–ø–∞
            useEffect(() => {
                const nftPricesRef = ref(db, 'nftPrices');
                onValue(nftPricesRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) setNftPrices(data);
                });

                // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
                const usersRef = ref(db, 'users');
                onValue(usersRef, (snapshot) => {
                    const data = snapshot.val();
                    if (data) {
                        const usersArray = Object.values(data)
                            .filter(user => user.coins > 0)
                            .sort((a, b) => (b.coins || 0) - (a.coins || 0))
                            .slice(0, 10);
                        setTopUsers(usersArray);
                    }
                });
            }, []);

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω NFT (–∏–º–∏—Ç–∞—Ü–∏—è –±–∏—Ä–∂–∏)
            useEffect(() => {
                const interval = setInterval(() => {
                    const newPrices = {};
                    nfts.forEach(nft => {
                        const currentPrice = nftPrices[nft.id] || nft.basePrice;
                        // –°–ª—É—á–∞–π–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ü–µ–Ω—ã –æ—Ç -10% –¥–æ +15%
                        const change = (Math.random() * 0.25 - 0.1);
                        const newPrice = Math.max(nft.basePrice * 0.5, currentPrice * (1 + change));
                        newPrices[nft.id] = Math.round(newPrice);
                    });
                    set(ref(db, 'nftPrices'), newPrices);
                }, 30000); // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

                return () => clearInterval(interval);
            }, [nftPrices]);

            const getCurrentPrice = (nft) => {
                return nftPrices[nft.id] || nft.basePrice;
            };

            const getPriceChange = (nft) => {
                const currentPrice = getCurrentPrice(nft);
                const change = ((currentPrice - nft.basePrice) / nft.basePrice) * 100;
                return change;
            };

            const handleBuyNFT = async (nft) => {
                const currentPrice = getCurrentPrice(nft);
                if (userCoins < currentPrice) {
                    alert(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–æ–∏–Ω–æ–≤! –ù—É–∂–Ω–æ ${currentPrice} –∫–æ–∏–Ω–æ–≤.`);
                    return;
                }
                setIsLoading(true);
                try {
                    const newNFTs = [...(userNFTs || []), { 
                        id: nft.id, 
                        purchasedAt: Date.now(),
                        hidden: false,
                        durability: nft.durability
                    }];
                    await update(ref(db, `users/${currentUser}`), { 
                        coins: userCoins - currentPrice,
                        nfts: newNFTs
                    });
                    onCoinsUpdate(userCoins - currentPrice);
                    onNFTUpdate(newNFTs);
                    alert(`–í—ã –∫—É–ø–∏–ª–∏ NFT "${nft.name}"!`);
                } catch (error) {
                    console.error('NFT purchase error:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ NFT');
                }
                setIsLoading(false);
            };

            const handleRemoveNFT = async (nftId) => {
                if (!confirm('–£–±—Ä–∞—Ç—å NFT –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è?')) return;
                setIsLoading(true);
                try {
                    const nftIndex = userNFTs.findIndex(nft => nft.id === nftId);
                    if (nftIndex === -1) return;
                    const newNFTs = [...userNFTs];
                    newNFTs[nftIndex] = { ...newNFTs[nftIndex], hidden: true };
                    await update(ref(db, `users/${currentUser}`), { nfts: newNFTs });
                    onNFTUpdate(newNFTs);
                    alert('NFT —É–±—Ä–∞–Ω –∏–∑ –ø—Ä–æ—Ñ–∏–ª—è!');
                } catch (error) {
                    console.error('NFT remove error:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ NFT');
                }
                setIsLoading(false);
            };

            const handleRestoreNFT = async (nftId) => {
                setIsLoading(true);
                try {
                    const nftIndex = userNFTs.findIndex(nft => nft.id === nftId);
                    if (nftIndex === -1) return;
                    const newNFTs = [...userNFTs];
                    newNFTs[nftIndex] = { ...newNFTs[nftIndex], hidden: false };
                    await update(ref(db, `users/${currentUser}`), { nfts: newNFTs });
                    onNFTUpdate(newNFTs);
                    alert('NFT –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω!');
                } catch (error) {
                    console.error('NFT restore error:', error);
                    alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ NFT');
                }
                setIsLoading(false);
            };

            const renderMarketTab = () => (
                <div className="space-y-4">
                    <div className="text-center mb-4">
                        <p className="text-slate-400 text-sm">NFT —Å –∏–∑–º–µ–Ω—è—é—â–∏–º–∏—Å—è —Ü–µ–Ω–∞–º–∏</p>
                        <p className="text-xs text-slate-500 mt-1">–ë–∞–ª–∞–Ω—Å: <span className="text-yellow-500 font-bold">{userCoins.toFixed(3)}</span></p>
                    </div>
                    <div className="grid grid-cols-2 gap-3">
                        {nfts.map((nft) => {
                            const userNFT = userNFTs.find(userNft => userNft.id === nft.id);
                            const isPurchased = !!userNFT;
                            const currentPrice = getCurrentPrice(nft);
                            const priceChange = getPriceChange(nft);
                            
                            if (isPurchased) return null;
                            
                            return (
                                <div key={nft.id} className="p-3 rounded-xl flex flex-col items-center gap-2 bg-slate-800 border border-slate-700">
                                    <div className="text-3xl">{nft.emoji}</div>
                                    <div className="text-center">
                                        <h3 className="font-medium text-white text-sm">{nft.name}</h3>
                                        <p className="text-xs text-slate-400">{nft.rarity}</p>
                                        <p className="text-xs text-slate-400">–ü–∞—Ç—Ç–µ—Ä–Ω: {nft.pattern}</p>
                                        <p className="text-xs text-slate-300 mt-1">{currentPrice} –∫–æ–∏–Ω–æ–≤</p>
                                        <p className={`text-xs ${priceChange >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                            {priceChange >= 0 ? '‚Üó' : '‚Üò'} {Math.abs(priceChange).toFixed(1)}%
                                        </p>
                                    </div>
                                    <Button 
                                        onClick={() => handleBuyNFT(nft)}
                                        isLoading={isLoading}
                                        disabled={userCoins < currentPrice}
                                        variant="gold"
                                        className="w-full text-xs"
                                    >
                                        –ö—É–ø–∏—Ç—å
                                    </Button>
                                </div>
                            );
                        })}
                    </div>
                </div>
            );

            const renderMyNFTsTab = () => (
                <div className="space-y-4">
                    {userNFTs.length > 0 ? (
                        <div className="grid grid-cols-2 gap-3">
                            {userNFTs.map((userNft) => {
                                const nft = nfts.find(n => n.id === userNft.id);
                                if (!nft) return null;
                                const currentPrice = getCurrentPrice(nft);
                                const purchasePrice = userNft.purchasePrice || nft.basePrice;
                                const profit = currentPrice - purchasePrice;
                                
                                return (
                                    <div key={nft.id} className={`p-3 rounded-xl flex flex-col items-center gap-2 bg-slate-800 border border-slate-700 ${userNft.hidden ? 'opacity-50' : ''}`}>
                                        <div className="text-3xl">{nft.emoji}</div>
                                        <div className="text-center">
                                            <h3 className="font-medium text-white text-sm">{nft.name}</h3>
                                            <p className="text-xs text-slate-400">–ü—Ä–æ—á–Ω–æ—Å—Ç—å: {userNft.durability || nft.durability}</p>
                                            <p className="text-xs text-slate-300">–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞: {currentPrice}</p>
                                            <p className={`text-xs ${profit >= 0 ? 'text-green-400' : 'text-red-400'}`}>
                                                –ü—Ä–∏–±—ã–ª—å: {profit >= 0 ? '+' : ''}{profit}
                                            </p>
                                            {userNft.hidden && <p className="text-xs text-yellow-400 mt-1">–°–∫—Ä—ã—Ç</p>}
                                        </div>
                                        <div className="flex gap-1 w-full">
                                            {userNft.hidden ? (
                                                <Button onClick={() => handleRestoreNFT(nft.id)} isLoading={isLoading} variant="primary" className="flex-1 text-xs">
                                                    –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
                                                </Button>
                                            ) : (
                                                <Button onClick={() => handleRemoveNFT(nft.id)} isLoading={isLoading} variant="danger" className="flex-1 text-xs">
                                                    –£–±—Ä–∞—Ç—å
                                                </Button>
                                            )}
                                        </div>
                                    </div>
                                );
                            })}
                        </div>
                    ) : (
                        <div className="text-center text-slate-500 py-8">
                            <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç NFT</p>
                        </div>
                    )}
                </div>
            );

            const renderTopTab = () => (
                <div className="space-y-3">
                    <div className="text-center mb-4">
                        <p className="text-slate-400 text-sm">–¢–æ–ø 10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
                    </div>
                    {topUsers.map((user, index) => (
                        <div key={user.username} className="flex items-center justify-between p-3 bg-slate-800 rounded-xl">
                            <div className="flex items-center gap-3">
                                <div className="flex items-center justify-center w-8 h-8 bg-indigo-600 rounded-full text-white font-bold">
                                    {user.avatar || user.username[0].toUpperCase()}
                                </div>
                                <div>
                                    <div className="text-white text-sm font-medium">{user.username}</div>
                                    <div className="text-slate-400 text-xs">{user.nfts?.length || 0} NFT</div>
                                </div>
                            </div>
                            <div className="text-right">
                                <div className="text-yellow-500 font-bold">{user.coins?.toFixed(3) || '0'}</div>
                                <div className="text-slate-400 text-xs">–∫–æ–∏–Ω–æ–≤</div>
                            </div>
                        </div>
                    ))}
                </div>
            );

            return (
                <Modal isOpen={isOpen} onClose={onClose} title="üìà NFT –ë–∏—Ä–∂–∞" className="max-w-4xl">
                    <div className="flex border-b border-slate-800 bg-slate-900/50">
                        {['market', 'my_nfts', 'top'].map(tab => (
                            <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 py-3 text-xs font-medium min-h-[44px] ${activeTab === tab ? 'text-indigo-400 border-b-2 border-indigo-400' : 'text-slate-400'}`}>
                                {tab === 'market' ? 'üõçÔ∏è –ú–∞–≥–∞–∑–∏–Ω' : tab === 'my_nfts' ? 'üé¥ –ú–æ–∏ NFT' : 'üèÜ –¢–æ–ø'}
                            </button>
                        ))}
                    </div>
                    {activeTab === 'market' && renderMarketTab()}
                    {activeTab === 'my_nfts' && renderMyNFTsTab()}
                    {activeTab === 'top' && renderTopTab()}
                </Modal>
            );
        };

        // Settings Modal
        const SettingsModal = ({ isOpen, onClose, currentUser, onLogout, userCoins, userAvatar, userFrame, userNameColor, userStatus, userStatusEmoji, onAvatarChange, onFrameChange, onColorChange, onStatusChange, purchasedAvatars, purchasedFrames, purchasedColors, purchasedStatuses }) => {
            const [activeTab, setActiveTab] = useState('profile');
            const [isAvatarModalOpen, setIsAvatarModalOpen] = useState(false);
            const [isFrameModalOpen, setIsFrameModalOpen] = useState(false);
            const [isNameColorModalOpen, setIsNameColorModalOpen] = useState(false);
            const [isStatusModalOpen, setIsStatusModalOpen] = useState(false);

            const getNameColorStyle = (colorId) => {
                const colors = { 
                    'red': '#ef4444', 'orange': '#f97316', 'yellow': '#eab308', 'green': '#22c55e', 
                    'blue': '#3b82f6', 'purple': '#a855f7', 'rainbow': 'linear-gradient(45deg, #ff0000, #ff9900, #ffff00, #00ff00, #00ffff, #0000ff, #9900ff)' 
                };
                return { 
                    color: colors[colorId] || '#ffffff',
                    background: colorId === 'rainbow' ? colors[colorId] : 'transparent',
                    WebkitBackgroundClip: colorId === 'rainbow' ? 'text' : 'initial',
                    WebkitTextFillColor: colorId === 'rainbow' ? 'transparent' : 'initial'
                };
            };

            const getFrameClass = (frameId) => {
                const frames = { 
                    'basic': 'frame-basic', 'silver': 'frame-silver', 'gold': 'frame-gold', 
                    'diamond': 'frame-diamond', 'rainbow': 'frame-rainbow' 
                };
                return frames[frameId] || '';
            };

            return (
                <>
                    <AvatarModal
                        isOpen={isAvatarModalOpen}
                        onClose={() => setIsAvatarModalOpen(false)}
                        currentUser={currentUser}
                        userCoins={userCoins}
                        onAvatarChange={onAvatarChange}
                        purchasedAvatars={purchasedAvatars}
                    />
                    
                    <FrameModal
                        isOpen={isFrameModalOpen}
                        onClose={() => setIsFrameModalOpen(false)}
                        currentUser={currentUser}
                        userCoins={userCoins}
                        onFrameChange={onFrameChange}
                        userFrame={userFrame}
                        purchasedFrames={purchasedFrames}
                    />

                    <NameColorModal
                        isOpen={isNameColorModalOpen}
                        onClose={() => setIsNameColorModalOpen(false)}
                        currentUser={currentUser}
                        userCoins={userCoins}
                        onColorChange={onColorChange}
                        purchasedColors={purchasedColors}
                    />

                    <StatusModal
                        isOpen={isStatusModalOpen}
                        onClose={() => setIsStatusModalOpen(false)}
                        currentUser={currentUser}
                        userCoins={userCoins}
                        onStatusChange={onStatusChange}
                        purchasedStatuses={purchasedStatuses}
                    />

                    <Modal isOpen={isOpen} onClose={onClose} title="‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏">
                        <div className="flex border-b border-slate-800 bg-slate-900/50 overflow-x-auto">
                            {['profile', 'appearance'].map(tab => (
                                <button key={tab} onClick={() => setActiveTab(tab)} className={`flex-1 py-2 text-xs font-medium capitalize min-h-[44px] ${activeTab === tab ? 'text-indigo-400 border-b-2 border-indigo-400' : 'text-slate-400'}`}>
                                    {tab === 'profile' ? '–ü—Ä–æ—Ñ–∏–ª—å' : '–í–Ω–µ—à–Ω–æ—Å—Ç—å'}
                                </button>
                            ))}
                        </div>
                        
                        {activeTab === 'profile' && (
                            <div className="space-y-4 text-center">
                                <div className={`w-20 h-20 mx-auto rounded-full bg-gradient-to-tr from-indigo-600 to-purple-600 flex items-center justify-center text-white font-bold text-3xl shadow-xl ${getFrameClass(userFrame)}`}>
                                    {userAvatar || currentUser[0].toUpperCase()}
                                </div>
                                <div>
                                    <h3 className="text-xl font-bold" style={getNameColorStyle(userNameColor)}>{currentUser}</h3>
                                    <p className="text-slate-400 text-sm">{userStatusEmoji} {userStatus || '–í —Å–µ—Ç–∏'}</p>
                                </div>
                                <div className="bg-yellow-500/10 border border-yellow-500/20 rounded-xl p-3">
                                    <div className="flex items-center justify-center gap-2 text-yellow-500">
                                        <Coins size={18} />
                                        <span className="font-bold text-md">{userCoins.toFixed(3)} –∫–æ–∏–Ω–æ–≤</span>
                                    </div>
                                </div>
                                <Button variant="secondary" onClick={onLogout} className="w-full text-sm" icon={<LogOut size={16} />}>–í—ã–π—Ç–∏</Button>
                            </div>
                        )}

                        {activeTab === 'appearance' && (
                            <div className="space-y-3">
                                <div className="grid grid-cols-2 gap-3">
                                    <Button onClick={() => setIsAvatarModalOpen(true)} variant="secondary" className="flex-col h-auto py-3" icon={<UserIcon size={16} />}>–ê–≤–∞—Ç–∞—Ä–∫–∞</Button>
                                    <Button onClick={() => setIsFrameModalOpen(true)} variant="secondary" className="flex-col h-auto py-3" icon={<ImageIcon size={16} />}>–†–∞–º–∫–∞</Button>
                                    <Button onClick={() => setIsNameColorModalOpen(true)} variant="secondary" className="flex-col h-auto py-3" icon={<Palette size={16} />}>–¶–≤–µ—Ç –∏–º–µ–Ω–∏</Button>
                                    <Button onClick={() => setIsStatusModalOpen(true)} variant="secondary" className="flex-col h-auto py-3" icon={<Edit3 size={16} />}>–°—Ç–∞—Ç—É—Å</Button>
                                </div>
                            </div>
                        )}
                    </Modal>
                </>
            );
        };

        // –û—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Clicker, AutoClicker, MessageBubble) –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
        // ... (–¥–æ–±–∞–≤—å –∏—Ö –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –∫–æ–¥–∞)

        // Main App Component
        const App = () => {
            // –°–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            const [currentUser, setCurrentUser] = useState(() => localStorage.getItem('dolbaeb_user'));
            const [isLoginView, setIsLoginView] = useState(true);
            const [usernameInput, setUsernameInput] = useState('');
            const [passwordInput, setPasswordInput] = useState('');
            // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ NFT –≤–æ–∫—Ä—É–≥ –∞–≤–∞—Ç–∞—Ä–∞
            const renderNFTOrbital = (nfts) => {
                const visibleNFTs = nfts.filter(nft => !nft.hidden).slice(0, 3); // –ú–∞–∫—Å–∏–º—É–º 3 NFT
                
                return (
                    <div className="nft-orbital">
                        {visibleNFTs.map((nft, index) => {
                            const nftData = [
                                { id: 'ghost', emoji: 'üëª' }, { id: 'robot', emoji: 'ü§ñ' }, { id: 'panda', emoji: 'üêº' },
                                { id: 'fox', emoji: 'ü¶ä' }, { id: 'alien', emoji: 'üëΩ' }, { id: 'tiger', emoji: 'üêØ' },
                                { id: 'lion', emoji: 'ü¶Å' }, { id: 'dragon', emoji: 'üêâ' }, { id: 'phoenix', emoji: 'ü¶ö' },
                                { id: 'unicorn', emoji: 'ü¶Ñ' }, { id: 'spaceship', emoji: 'üöÄ' }, { id: 'comet', emoji: '‚òÑÔ∏è' },
                                { id: 'rainbow_dragon', emoji: 'üåàüêâ' }
                            ].find(n => n.id === nft.id);
                            
                            if (!nftData) return null;
                            
                            // –†–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ 3 NFT –ø–æ –∫—Ä—É–≥—É
                            const angle = (index / Math.max(visibleNFTs.length, 1)) * 360;
                            const animation = `orbit${index + 1}`;
                            
                            return (
                                <div 
                                    key={nft.id}
                                    className="nft-item"
                                    style={{ 
                                        animation: `${animation} 8s linear infinite`,
                                        transform: `rotate(${angle}deg) translateX(35px) rotate(-${angle}deg)`
                                    }}
                                >
                                    {nftData.emoji}
                                </div>
                            );
                        })}
                    </div>
                );
            };

            // –û—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...
            
            return (
                <div>
                    {/* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */}
                    {/* –î–æ–±–∞–≤—å –≤—ã–∑–æ–≤ renderNFTOrbital —Ç–∞–º, –≥–¥–µ –Ω—É–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å NFT –≤–æ–∫—Ä—É–≥ –∞–≤–∞—Ç–∞—Ä–∞ */}
                </div>
            );
        };

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
